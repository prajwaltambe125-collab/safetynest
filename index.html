<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SafetyNest ‚Äì Personal Safety App</title>
  <meta name="description" content="SafetyNest is a personal safety app with SOS alerts, live location sharing, and trusted contacts." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    /* Your full CSS from the original file remains unchanged */
  </style>
</head>
<body>
  <!-- Login Screen -->
  <div id="loginScreen" class="login-container">
    <div class="login-card">
      <div class="login-header">
        <div class="login-logo">
          <svg viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2l7 4v6c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-4z"/>
          </svg>
        </div>
        <h2 style="margin:0 0 8px">Welcome to SafetyNest</h2>
        <p class="muted" style="margin:0; font-size:0.9rem">Sign in to access your safety dashboard</p>
      </div>
      
      <form id="loginForm">
        <div class="form-group">
          <label for="username">Username or Email</label>
          <input type="text" id="username" class="form-input" placeholder="Enter your username" required>
        </div>
        
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" class="form-input" placeholder="Enter your password" required>
        </div>
        
        <div id="loginError" class="alert alert-error hidden">
          Invalid credentials. Please try again.
        </div>
        
        <button type="submit" class="btn btn-primary mt-4">
          Sign In
        </button>
      </form>
    </div>
  </div>

  <!-- Main Site Content -->
  <div id="mainContent" class="hidden">
    <!-- keep your header, hero, emergency dashboard, features, contacts, footer -->
  </div>

  <!-- Fake Call Overlay -->
  <div id="fakeCallOverlay" class="fake-call-overlay hidden">
    <!-- same as original -->
  </div>

  <script>
    // Global variables
    let currentUser = null;
    let emergencyContacts = [
      {id: 1, name: 'Prajwal Tambe', phone: '7738135966', relation: 'friend', status: 'online'},
      {id: 2, name: 'Snehal', phone: '7666701769', relation: 'friend', status: 'online'},
      {id: 3, name: 'Dhanashree', phone: '9309820334', relation: 'family', status: 'online'},
      {id: 4, name: 'John Smith', phone: '+1 (555) 123-4567', relation: 'family', status: 'online'},
      {id: 5, name: 'Sarah Johnson', phone: '+1 (555) 987-6543', relation: 'friend', status: 'offline'},
      {id: 6, name: 'Emergency Services', phone: '911', relation: 'emergency', status: 'online'},
      {id: 7, name: 'Local Police', phone: '+1 (555) 911-1234', relation: 'police', status: 'online'}
    ];
    let sosActive = false;
    let fakeCallTimeout = null;
    let flashlightActive = false;
    let flashlightInterval = null;
    let safetyNotes = localStorage.getItem('safetyNotes') || '';
    let currentLocation = null;

    // Set current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // ‚úÖ Login functionality (basic authentication)
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      
      // üîë Set your own login credentials here
      const validUsername = "ricky";  
      const validPassword = "mySecret123";  

      if (username === validUsername && password === validPassword) {
        currentUser = {username: username, loginTime: new Date()};
        showMainContent();
        hideLoginError();
      } else {
        showLoginError();
      }
    });

    function showLoginError() {
      document.getElementById('loginError').classList.remove('hidden');
    }

    function hideLoginError() {
      document.getElementById('loginError').classList.add('hidden');
    }

    function showMainContent() {
      document.getElementById('loginScreen').classList.add('hidden');
      document.getElementById('mainContent').classList.remove('hidden');
      populateContactList();
    }

    function logout() {
      currentUser = null;
      document.getElementById('mainContent').classList.add('hidden');
      document.getElementById('loginScreen').classList.remove('hidden');
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
      hideLoginError();
    }

    // ‚úÖ Fixed Maps link in emergency message
    function createEmergencyMessage() {
      let message = 'üö® EMERGENCY ALERT! I need immediate help!';
      
      if (currentLocation) {
        message += `\nüìç My location: https://maps.google.com/?q=${currentLocation.lat},${currentLocation.lng}`;
        message += `\n‚è∞ Time: ${new Date().toLocaleString()}`;
        message += `\nüéØ Accuracy: ¬±${currentLocation.accuracy} meters`;
      } else {
        message += `\n‚è∞ Time: ${new Date().toLocaleString()}`;
        message += `\nüìç Location: Unable to determine`;
      }
      
      message += '\n\n‚ö†Ô∏è This is an automated emergency alert from SafetyNest app.';
      return message;
    }

    // ‚úÖ Fixed Maps link in follow-up
    function sendFollowUp() {
      const followUpMessage = 'üì± FOLLOW-UP: I am still in need of assistance. Please respond or come to my location immediately.';
      
      emergencyContacts.forEach(contact => {
        if (contact.status === 'online' && contact.relation !== 'emergency') {
          console.log(`üì® Follow-up sent to ${contact.name}: "${followUpMessage}"`);
          
          const encodedMessage = encodeURIComponent(followUpMessage + (currentLocation ? 
            `\nüìç Location: https://maps.google.com/?q=${currentLocation.lat},${currentLocation.lng}` : ''));
          window.open(`sms:${contact.phone}?body=${encodedMessage}`, '_blank');
        }
      });
      
      const confirmation = document.createElement('div');
      confirmation.className = 'alert alert-success';
      confirmation.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 10002;';
      confirmation.innerHTML = 'üì± Follow-up messages sent to all personal contacts!';
      document.body.appendChild(confirmation);
      
      setTimeout(() => confirmation.remove(), 3000);
    }

    // ‚ö°Ô∏è Keep rest of your original SOS, fake call, flashlight, notes, and contacts functions
  </script>
</body>
</html>
